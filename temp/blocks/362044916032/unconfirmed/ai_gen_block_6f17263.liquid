{% doc %}
  @prompt
    infogr√°fico interativo explicando a tecnologia liposomal

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .liposomal-infographic-{{ ai_gen_id }} {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 20px;
    font-family: {{ block.settings.font_family }};
    color: {{ block.settings.text_color }};
    background-color: {{ block.settings.background_color }};
    border-radius: {{ block.settings.border_radius }}px;
  }

  .liposomal-header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 40px;
  }

  .liposomal-title-{{ ai_gen_id }} {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 15px;
    color: {{ block.settings.title_color }};
  }

  .liposomal-subtitle-{{ ai_gen_id }} {
    font-size: 18px;
    margin-bottom: 30px;
  }

  .liposomal-stages-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 40px;
    margin-bottom: 40px;
  }

  .liposomal-stage-{{ ai_gen_id }} {
    flex: 1;
    min-width: 250px;
    max-width: 350px;
    padding: 20px;
    border-radius: 10px;
    background-color: {{ block.settings.card_background_color }};
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
    cursor: pointer;
    position: relative;
  }

  .liposomal-stage-{{ ai_gen_id }}:hover {
    transform: translateY(-5px);
  }

  .liposomal-stage-number-{{ ai_gen_id }} {
    position: absolute;
    top: -15px;
    left: -15px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: {{ block.settings.accent_color }};
    color: white;
    border-radius: 50%;
    font-weight: bold;
    font-size: 20px;
  }

  .liposomal-stage-title-{{ ai_gen_id }} {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 15px;
    color: {{ block.settings.accent_color }};
  }

  .liposomal-stage-content-{{ ai_gen_id }} {
    font-size: 16px;
    line-height: 1.5;
  }

  .liposomal-visual-{{ ai_gen_id }} {
    width: 100%;
    height: 400px;
    position: relative;
    margin: 40px auto;
    background-color: {{ block.settings.visual_background_color }};
    border-radius: 15px;
    overflow: hidden;
  }

  .liposomal-visual-container-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .liposomal-membrane-{{ ai_gen_id }} {
    position: absolute;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    border: 15px solid rgba(255, 255, 255, 0.3);
    background-color: rgba({{ block.settings.accent_color | color_to_rgb }}, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.5s ease;
  }

  .liposomal-inner-{{ ai_gen_id }} {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background-color: rgba({{ block.settings.accent_color | color_to_rgb }}, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .liposomal-nutrient-{{ ai_gen_id }} {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background-color: {{ block.settings.accent_color }};
    position: relative;
    transition: all 0.5s ease;
  }

  .liposomal-particles-{{ ai_gen_id }} {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .liposomal-particle-{{ ai_gen_id }} {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: {{ block.settings.accent_color }};
    opacity: 0;
  }

  .liposomal-benefits-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 40px;
  }

  .liposomal-benefit-{{ ai_gen_id }} {
    flex: 1;
    min-width: 200px;
    max-width: 300px;
    padding: 15px;
    background-color: {{ block.settings.card_background_color }};
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .liposomal-benefit-icon-{{ ai_gen_id }} {
    font-size: 30px;
    margin-bottom: 10px;
    color: {{ block.settings.accent_color }};
  }

  .liposomal-benefit-title-{{ ai_gen_id }} {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .liposomal-benefit-description-{{ ai_gen_id }} {
    font-size: 14px;
    line-height: 1.4;
  }

  .liposomal-controls-{{ ai_gen_id }} {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
  }

  .liposomal-button-{{ ai_gen_id }} {
    padding: 10px 20px;
    background-color: {{ block.settings.accent_color }};
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }

  .liposomal-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_color }};
  }

  .liposomal-info-{{ ai_gen_id }} {
    margin-top: 40px;
    padding: 20px;
    background-color: rgba({{ block.settings.accent_color | color_to_rgb }}, 0.05);
    border-radius: 10px;
    border-left: 4px solid {{ block.settings.accent_color }};
  }

  .liposomal-info-title-{{ ai_gen_id }} {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 10px;
    color: {{ block.settings.accent_color }};
  }

  .liposomal-info-content-{{ ai_gen_id }} {
    font-size: 16px;
    line-height: 1.6;
  }

  @media screen and (max-width: 768px) {
    .liposomal-stages-{{ ai_gen_id }} {
      flex-direction: column;
      align-items: center;
    }
    
    .liposomal-stage-{{ ai_gen_id }} {
      width: 100%;
      max-width: 100%;
    }
    
    .liposomal-visual-{{ ai_gen_id }} {
      height: 300px;
    }
    
    .liposomal-membrane-{{ ai_gen_id }} {
      width: 220px;
      height: 220px;
    }
    
    .liposomal-inner-{{ ai_gen_id }} {
      width: 120px;
      height: 120px;
    }
    
    .liposomal-nutrient-{{ ai_gen_id }} {
      width: 60px;
      height: 60px;
    }
  }
{% endstyle %}

<liposomal-infographic-{{ ai_gen_id }} class="liposomal-infographic-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="liposomal-header-{{ ai_gen_id }}">
    <h2 class="liposomal-title-{{ ai_gen_id }}">{{ block.settings.title }}</h2>
    <div class="liposomal-subtitle-{{ ai_gen_id }}">{{ block.settings.subtitle }}</div>
  </div>

  <div class="liposomal-stages-{{ ai_gen_id }}">
    <div class="liposomal-stage-{{ ai_gen_id }}" data-stage="1">
      <div class="liposomal-stage-number-{{ ai_gen_id }}">1</div>
      <h3 class="liposomal-stage-title-{{ ai_gen_id }}">{{ block.settings.stage_1_title }}</h3>
      <div class="liposomal-stage-content-{{ ai_gen_id }}">{{ block.settings.stage_1_content }}</div>
    </div>
    
    <div class="liposomal-stage-{{ ai_gen_id }}" data-stage="2">
      <div class="liposomal-stage-number-{{ ai_gen_id }}">2</div>
      <h3 class="liposomal-stage-title-{{ ai_gen_id }}">{{ block.settings.stage_2_title }}</h3>
      <div class="liposomal-stage-content-{{ ai_gen_id }}">{{ block.settings.stage_2_content }}</div>
    </div>
    
    <div class="liposomal-stage-{{ ai_gen_id }}" data-stage="3">
      <div class="liposomal-stage-number-{{ ai_gen_id }}">3</div>
      <h3 class="liposomal-stage-title-{{ ai_gen_id }}">{{ block.settings.stage_3_title }}</h3>
      <div class="liposomal-stage-content-{{ ai_gen_id }}">{{ block.settings.stage_3_content }}</div>
    </div>
  </div>

  <div class="liposomal-visual-{{ ai_gen_id }}">
    <div class="liposomal-visual-container-{{ ai_gen_id }}">
      <div class="liposomal-membrane-{{ ai_gen_id }}">
        <div class="liposomal-inner-{{ ai_gen_id }}">
          <div class="liposomal-nutrient-{{ ai_gen_id }}"></div>
        </div>
      </div>
      <div class="liposomal-particles-{{ ai_gen_id }}"></div>
    </div>
  </div>

  <div class="liposomal-controls-{{ ai_gen_id }}">
    <button class="liposomal-button-{{ ai_gen_id }}" data-action="formation">{{ block.settings.formation_button_text }}</button>
    <button class="liposomal-button-{{ ai_gen_id }}" data-action="absorption">{{ block.settings.absorption_button_text }}</button>
    <button class="liposomal-button-{{ ai_gen_id }}" data-action="delivery">{{ block.settings.delivery_button_text }}</button>
  </div>

  <div class="liposomal-benefits-{{ ai_gen_id }}">
    <div class="liposomal-benefit-{{ ai_gen_id }}">
      <div class="liposomal-benefit-icon-{{ ai_gen_id }}">‚ö°</div>
      <h4 class="liposomal-benefit-title-{{ ai_gen_id }}">{{ block.settings.benefit_1_title }}</h4>
      <div class="liposomal-benefit-description-{{ ai_gen_id }}">{{ block.settings.benefit_1_description }}</div>
    </div>
    
    <div class="liposomal-benefit-{{ ai_gen_id }}">
      <div class="liposomal-benefit-icon-{{ ai_gen_id }}">üõ°Ô∏è</div>
      <h4 class="liposomal-benefit-title-{{ ai_gen_id }}">{{ block.settings.benefit_2_title }}</h4>
      <div class="liposomal-benefit-description-{{ ai_gen_id }}">{{ block.settings.benefit_2_description }}</div>
    </div><div class="liposomal-benefit-{{ ai_gen_id }}">
      <div class="liposomal-benefit-icon-{{ ai_gen_id }}">üîÑ</div>
      <h4 class="liposomal-benefit-title-{{ ai_gen_id }}">{{ block.settings.benefit_3_title }}</h4>
      <div class="liposomal-benefit-description-{{ ai_gen_id }}">{{ block.settings.benefit_3_description }}</div>
    </div>
  </div>

  <div class="liposomal-info-{{ ai_gen_id }}">
    <h3 class="liposomal-info-title-{{ ai_gen_id }}">{{ block.settings.info_title }}</h3>
    <div class="liposomal-info-content-{{ ai_gen_id }}">{{ block.settings.info_content }}</div>
  </div>
</liposomal-infographic-{{ ai_gen_id }}>

<script>
  (function() {
    class LiposomalInfographic extends HTMLElement {
      constructor() {
        super();
        this.currentStage = 0;
        this.membrane = this.querySelector(`.liposomal-membrane-{{ ai_gen_id }}`);
        this.nutrient = this.querySelector(`.liposomal-nutrient-{{ ai_gen_id }}`);
        this.particlesContainer = this.querySelector(`.liposomal-particles-{{ ai_gen_id }}`);
        this.stages = this.querySelectorAll(`.liposomal-stage-{{ ai_gen_id }}`);
        this.buttons = this.querySelectorAll(`.liposomal-button-{{ ai_gen_id }}`);
        this.particles = [];
        this.createParticles();
      }

      connectedCallback() {
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.stages.forEach(stage => {
          stage.addEventListener('click', () => {
            const stageNumber = parseInt(stage.dataset.stage);
            this.animateStage(stageNumber);
          });
        });

        this.buttons.forEach(button => {
          button.addEventListener('click', () => {
            const action = button.dataset.action;
            if (action === 'formation') {
              this.animateFormation();
            } else if (action === 'absorption') {
              this.animateAbsorption();
            } else if (action === 'delivery') {
              this.animateDelivery();
            }
          });
        });
      }

      createParticles() {
        for (let i = 0; i < 20; i++) {
          const particle = document.createElement('div');
          particle.classList.add(`liposomal-particle-{{ ai_gen_id }}`);
          this.particlesContainer.appendChild(particle);
          this.particles.push(particle);
          
          // Position randomly
          particle.style.left = `${Math.random() * 100}%`;
          particle.style.top = `${Math.random() * 100}%`;
        }
      }

      animateStage(stageNumber) {
        this.stages.forEach(stage => {
          stage.style.transform = '';
        });
        
        const selectedStage = this.querySelector(`.liposomal-stage-{{ ai_gen_id }}[data-stage="${stageNumber}"]`);
        selectedStage.style.transform = 'translateY(-10px)';
        
        if (stageNumber === 1) {
          this.animateFormation();
        } else if (stageNumber === 2) {
          this.animateAbsorption();
        } else if (stageNumber === 3) {
          this.animateDelivery();
        }
      }

      animateFormation() {
        // Reset
        this.resetAnimation();
        
        // Animate membrane formation
        this.membrane.style.transform = 'scale(1.1)';
        this.membrane.style.borderWidth = '20px';
        this.membrane.style.borderColor = 'rgba(255, 255, 255, 0.5)';
        
        // Animate nutrient
        this.nutrient.style.backgroundColor = '{{ block.settings.accent_color }}';
        this.nutrient.style.transform = 'scale(1.2)';
        
        // Animate particles
        this.particles.forEach((particle, index) => {
          setTimeout(() => {
            particle.style.opacity = '0.8';
            const angle = Math.random() * Math.PI * 2;
            const distance = 50 + Math.random() * 100;
            const x = Math.cos(angle) * distance;
            const y = Math.sin(angle) * distance;
            
            particle.style.transform = `translate(${x}px, ${y}px)`;
            
            setTimeout(() => {
              particle.style.opacity = '0';
              particle.style.transform = 'translate(0, 0)';
            }, 1500);
          }, index * 100);
        });
      }

      animateAbsorption() {
        // Reset
        this.resetAnimation();
        
        // Animate membrane absorption
        this.membrane.style.transform = 'scale(0.9)';
        this.membrane.style.borderWidth = '25px';
        this.membrane.style.borderColor = 'rgba(255, 255, 255, 0.7)';
        
        // Animate nutrient
        this.nutrient.style.backgroundColor = '{{ block.settings.accent_color }}';
        this.nutrient.style.transform = 'scale(0.9)';
        
        // Animate particles moving inward
        this.particles.forEach((particle, index) => {
          setTimeout(() => {
            particle.style.opacity = '0.8';
            const angle = Math.random() * Math.PI * 2;
            const startDistance = 150 + Math.random() * 100;
            const endDistance = 50 + Math.random() * 30;
            
            const startX = Math.cos(angle) * startDistance;
            const startY = Math.sin(angle) * startDistance;
            const endX = Math.cos(angle) * endDistance;
            const endY = Math.sin(angle) * endDistance;
            
            particle.style.transform = `translate(${startX}px, ${startY}px)`;
            
            setTimeout(() => {
              particle.style.transform = `translate(${endX}px, ${endY}px)`;
              
              setTimeout(() => {
                particle.style.opacity = '0';
                particle.style.transform = 'translate(0, 0)';
              }, 1000);
            }, 500);
          }, index * 50);
        });
      }

      animateDelivery() {
        // Reset
        this.resetAnimation();
        
        // Animate membrane delivery
        this.membrane.style.transform = 'scale(1)';
        this.membrane.style.borderWidth = '5px';
        this.membrane.style.borderColor = 'rgba(255, 255, 255, 0.2)';
        
        // Animate nutrient
        this.nutrient.style.backgroundColor = 'rgba({{ block.settings.accent_color | color_to_rgb }}, 0.5)';
        this.nutrient.style.transform = 'scale(0.5)';
        
        // Animate particles moving outward
        this.particles.forEach((particle, index) => {
          setTimeout(() => {
            particle.style.opacity = '0.8';
            const angle = Math.random() * Math.PI * 2;
            const startDistance = 30 + Math.random() * 20;
            const endDistance = 150 + Math.random() * 100;
            
            const startX = Math.cos(angle) * startDistance;
            const startY = Math.sin(angle) * startDistance;
            const endX = Math.cos(angle) * endDistance;
            const endY = Math.sin(angle) * endDistance;
            
            particle.style.transform = `translate(${startX}px, ${startY}px)`;
            
            setTimeout(() => {
              particle.style.transform = `translate(${endX}px, ${endY}px)`;
              
              setTimeout(() => {
                particle.style.opacity = '0';
                particle.style.transform = 'translate(0, 0)';
              }, 1000);
            }, 500);
          }, index * 50);
        });
      }

      resetAnimation() {
        this.membrane.style.transform = '';
        this.membrane.style.borderWidth = '';
        this.membrane.style.borderColor = '';
        this.nutrient.style.backgroundColor = '';
        this.nutrient.style.transform = '';
        
        this.particles.forEach(particle => {
          particle.style.opacity = '0';
          particle.style.transform = 'translate(0, 0)';
        });
      }
    }

    customElements.define('liposomal-infographic-{{ ai_gen_id }}', LiposomalInfographic);
  })();
</script>

{% schema %}
{
  "name": "Liposomal Infographic",
  "tag": null,
  "class": "liposomal-section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Tecnologia Liposomal"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Entenda como a tecnologia liposomal melhora a absor√ß√£o e efic√°cia dos nutrientes"
    },
    {
      "type": "header",
      "content": "Stages"
    },
    {
      "type": "text",
      "id": "stage_1_title",
      "label": "Stage 1 Title",
      "default": "Forma√ß√£o Liposomal"
    },
    {
      "type": "textarea",
      "id": "stage_1_content",
      "label": "Stage 1 Content",
      "default": "Os nutrientes s√£o encapsulados em uma bicamada fosfolip√≠dica, criando uma estrutura semelhante √†s membranas celulares do corpo humano."
    },
    {
      "type": "text",
      "id": "stage_2_title",
      "label": "Stage 2 Title",
      "default": "Prote√ß√£o e Absor√ß√£o"
    },
    {
      "type": "textarea",
      "id": "stage_2_content",
      "label": "Stage 2 Content",
      "default": "A camada liposomal protege os nutrientes da degrada√ß√£o no sistema digestivo, permitindo que cheguem intactos ao intestino para absor√ß√£o."
    },
    {
      "type": "text",
      "id": "stage_3_title",
      "label": "Stage 3 Title",
      "default": "Entrega Celular"
    },
    {
      "type": "textarea",
      "id": "stage_3_content",
      "label": "Stage 3 Content",
      "default": "Os lipossomos fundem-se com as membranas celulares, liberando os nutrientes diretamente no interior das c√©lulas para m√°xima biodisponibilidade."
    },
    {
      "type": "header",
      "content": "Interactive Controls"
    },
    {
      "type": "text",
      "id": "formation_button_text",
      "label": "Formation Button Text",
      "default": "Forma√ß√£o"
    },
    {
      "type": "text",
      "id": "absorption_button_text",
      "label": "Absorption Button Text",
      "default": "Absor√ß√£o"
    },
    {
      "type": "text",
      "id": "delivery_button_text",
      "label": "Delivery Button Text",
      "default": "Entrega"
    },
    {
      "type": "header",
      "content": "Benefits"
    },
    {
      "type": "text",
      "id": "benefit_1_title",
      "label": "Benefit 1 Title",
      "default": "Maior Absor√ß√£o"
    },
    {
      "type": "textarea",
      "id": "benefit_1_description",
      "label": "Benefit 1 Description",
      "default": "Aumento de at√© 20x na absor√ß√£o de nutrientes comparado a formas convencionais."
    },
    {
      "type": "text",
      "id": "benefit_2_title",
      "label": "Benefit 2 Title",
      "default": "Prote√ß√£o Digestiva"
    },
    {
      "type": "textarea",
      "id": "benefit_2_description",
      "label": "Benefit 2 Description",
      "default": "Protege nutrientes sens√≠veis da degrada√ß√£o pelos √°cidos estomacais e enzimas digestivas."
    },
    {
      "type": "text",
      "id": "benefit_3_title",
      "label": "Benefit 3 Title",
      "default": "Biodisponibilidade"
    },
    {
      "type": "textarea",
      "id": "benefit_3_description",
      "label": "Benefit 3 Description",
      "default": "Entrega direta nas c√©lulas, aumentando a efic√°cia e resultados dos suplementos."
    },
    {
      "type": "header",
      "content": "Additional Information"
    },
    {
      "type": "text",
      "id": "info_title",
      "label": "Info Box Title",
      "default": "Por que a tecnologia liposomal √© superior?"
    },
    {
      "type": "textarea",
      "id": "info_content",
      "label": "Info Box Content",
      "default": "A tecnologia liposomal representa um avan√ßo significativo na suplementa√ß√£o nutricional. Ao encapsular nutrientes em ves√≠culas lip√≠dicas microsc√≥picas (lipossomos), conseguimos superar as limita√ß√µes da absor√ß√£o tradicional, permitindo que mais nutrientes cheguem √†s c√©lulas onde s√£o necess√°rios. Isso resulta em doses menores com maior efic√°cia e menos desperd√≠cio."
    },
    {
      "type": "header",
      "content": "Style Settings"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#222222"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#4a90e2"
    },
    {
      "type": "color",
      "id": "card_background_color",
      "label": "Card Background Color",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "visual_background_color",
      "label": "Visual Background Color",
      "default": "#f0f8ff"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button Hover Color",
      "default": "#3a70b2"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Border Radius",
      "default": 8
    },
    {
      "type": "select",
      "id": "font_family",
      "label": "Font Family",
      "options": [
        {
          "value": "sans-serif",
          "label": "Sans-serif"
        },
        {
          "value": "serif",
          "label": "Serif"
        },
        {
          "value": "system-ui",
          "label": "System UI"
        }
      ],
      "default": "sans-serif"
    }
  ],
  "presets": [
    {
      "name": "Liposomal Infographic"
    }
  ]
}
{% endschema %}