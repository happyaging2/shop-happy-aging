{% comment %} Hero Carousel Section with clickable banners opening in same tab {% endcomment %}
<div class="{% if section.settings.fifty_fifty == false %}flex justify-center lg:justify-start items-center h-screen{% endif %} lg:h-[calc(100vh-96px)] lg:min-h-[600px] lg:min-h-[832px] relative w-full" {% unless section.settings.bg_color == blank %}style="background: {{ section.settings.bg_color }}"{% endunless %}>
  <div class="site-container w-full px-4 lg:pl-16">
    <!-- Carousel Wrapper -->
    <div class="carousel relative overflow-hidden">
      <!-- Slides -->
      <div class="carousel-track flex transition-transform duration-300 ease-in-out">
        {% for block in section.blocks %}
          <div class="carousel-slide flex-shrink-0 w-full relative">
            {% if block.settings.banner_link != blank %}
              <a href="{{ block.settings.banner_link }}" target="_self">
            {% endif %}

            <!-- MEDIA -->
            {% unless block.settings.video_url_mobile == blank %}
              <div class="lg:hidden absolute inset-0">
                <site-video>
                  <video
                    {% unless block.settings.video_poster_mobile == blank %}poster="{{ block.settings.video_poster_mobile | image_url: width: 1000 }}"{% endunless %}
                    class="w-full h-full object-cover"
                    loop autoplay muted playsinline
                  >
                    <source data-src="{{ block.settings.video_url_mobile }}" type="video/mp4">
                  </video>
                </site-video>
              </div>
            {% endunless %}
            {% unless block.settings.video_url_desktop == blank %}
              <div class="hidden lg:block absolute inset-0">
                <site-video>
                  <video
                    {% unless block.settings.video_poster_desktop == blank %}poster="{{ block.settings.video_poster_desktop | image_url: width: 1920 }}"{% endunless %}
                    class="w-full h-full object-cover"
                    loop autoplay muted playsinline
                  >
                    <source data-src="{{ block.settings.video_url_desktop }}" type="video/mp4">
                  </video>
                </site-video>
              </div>
            {% endunless %}

            {% unless block.settings.image_mobile == blank %}
              <div class="lg:hidden absolute inset-0">
                {%- render 'image', image: block.settings.image_mobile, class: 'site-image w-full h-full object-cover', loading: 'eager' -%}
              </div>
            {% endunless %}
            {% unless block.settings.image_desktop == blank %}
              <div class="hidden lg:block absolute inset-0">
                {%- render 'image', image: block.settings.image_desktop, class: 'site-image w-full h-full object-cover', loading: 'eager' -%}
              </div>
            {% endunless %}
            <!-- / MEDIA -->

            {% if block.settings.banner_link != blank %}</a>{% endif %}
          </div>
        {% endfor %}
      </div>

      <!-- Navigation Arrows (add JS/CSS separately) -->
      <button class="carousel-prev absolute left-4 top-1/2 transform -translate-y-1/2 z-20">‹</button>
      <button class="carousel-next absolute right-4 top-1/2 transform -translate-y-1/2 z-20">›</button>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Hero Carousel",
  "tag": "section",
  "settings": [
    { "type": "checkbox", "id": "fifty_fifty", "label": "Fifty Fifty" },
    { "type": "color", "id": "bg_color", "label": "Background Color" },
    { "type": "select", "id": "button_color", "label": "Button Color", "options": [ { "value": "black", "label": "Black" }, { "value": "cream", "label": "Cream" } ] },
    { "type": "select", "id": "text_color", "label": "Text Color", "options": [ { "value": "white", "label": "White" }, { "value": "black", "label": "Black" } ] },
    { "type": "text", "id": "sub_heading", "label": "Sub-Heading" },
    { "type": "richtext", "id": "title", "label": "Title" },
    { "type": "text", "id": "sup_word", "label": "Floating word" },
    { "type": "text", "id": "title_words", "label": "Title Words" },
    { "type": "richtext", "id": "text", "label": "Text" },
    { "type": "url", "id": "cta_link", "label": "CTA Link" },
    { "type": "text", "id": "cta_text", "label": "CTA Text" }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": "Banner",
      "settings": [
        { "type": "image_picker", "id": "image_desktop", "label": "Background Image Desktop" },
        { "type": "image_picker", "id": "image_mobile", "label": "Background Image Mobile" },
        { "type": "text", "id": "video_url_desktop", "label": "Video URL Desktop (Mp4)" },
        { "type": "text", "id": "video_url_mobile", "label": "Video URL Mobile (Mp4)" },
        { "type": "image_picker", "id": "video_poster_mobile", "label": "Video Poster Mobile" },
        { "type": "image_picker", "id": "video_poster_desktop", "label": "Video Poster Desktop" },
        { "type": "url", "id": "banner_link", "label": "Banner Link", "info": "URL para o banner (abre na mesma aba)" }
      ]
    }
  ],
  "presets": [ { "name": "Hero Carousel" } ]
}
{% endschema %}
