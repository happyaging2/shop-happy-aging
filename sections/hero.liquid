{% comment %} Hero Section with clickable banner {% endcomment %}
<div
  class="{% if section.settings.fifty_fifty == false %}flex justify-center lg:justify-start items-center h-screen{% endif %} lg:h-[calc(100vh-96px)] lg:min-h-[600px] lg:min-h-[832px] relative w-full"
  {% unless section.settings.bg_color == blank %}style="background: {{ section.settings.bg_color }}"{% endunless %}
>
  <div class="{% if section.settings.fifty_fifty == true %}d-grid lg:grid-cols-2 h-full{% else %}px-4 lg:pl-16 site-container w-full{% endif %} fifty-selector">
    <!-- TEXT -->
    <div class="hero-left-block d-grid gap-4 relative w-full content-center text-center lg:text-start z-10 {% if section.settings.text_color == 'white' %}text-white{% else %}text-black{% endif %} {% if section.settings.fifty_fifty == true %}py-16 lg:py-0 {% if section.settings.mobile_image_first %}order-2{% else %}order-1{% endif %} lg:order-1 lg:pl-8{% endif %}">
      {% unless section.settings.sub_heading == blank %}
        <p class="sub-heading">{{ section.settings.sub_heading }}</p>
      {% endunless %}

      {% unless section.settings.title == blank %}
        <h2 class="heading heading-with-floating heading--1 lg:text-[90px] lg:w-[410px] lg:mb-2">
          {%- capture words -%}
            {% unless section.settings.title_words == blank %}
              <span>
                <words-changer data-words="{{ section.settings.title_words }}">
                  {% assign first_word = section.settings.title_words | split: ',' | first %}
                  <em class="target-js">{{ first_word }}</em>
                </words-changer>
              </span>
            {% endunless %}
          {%- endcapture -%}

          {%- liquid
            assign supword = ''
            if section.settings.sup_word != blank
              assign supword = '<sup class="sup_word">' | append: section.settings.sup_word | append: '</sup>'
            endif
            assign closing_tags = "</h1>|</h2>|</h3>|</h4>|</h5>|</h6>|</p>" | split: "|"
            assign used_tag = ''
            for tag in closing_tags
              if section.settings.title contains tag
                assign used_tag = tag
              endif
            endfor
            assign title_content = section.settings.title | split: used_tag | last
            assign new_title = title_content | append: supword | append: words | append: used_tag
            assign title = section.settings.title | replace: title_content | append: used_tag, new_title
          -%}
          {{ title }}
        </h2>
      {% endunless %}

      {% unless section.settings.text == blank %}
        <div class="paragraph paragraph--2 lg:max-w-[330px] mb-4 lg:mb-8">{{ section.settings.text }}</div>
      {% endunless %}

      {% unless section.settings.cta_link == blank or section.settings.cta_text == blank %}
        <a class="button mx-auto lg:mx-0 {% if section.settings.button_color == 'cream' %}button--cream{% else %}button--black{% endif %}" href="{{ section.settings.cta_link }}">{{ section.settings.cta_text }}</a>
      {% endunless %}
    </div>
    <!-- / TEXT -->

    <!-- MEDIA -->
    <div class="{% if section.settings.fifty_fifty == true %}{% if section.settings.mobile_image_first %}order-1{% else %}order-2{% endif %} lg:order-2 relative aspect-square lg:aspect-[unset]{% endif %}">
      {% comment %} Wrap media in link if banner_link is set {% endcomment %}
      {% if section.settings.banner_link != blank %}<a href="{{ section.settings.banner_link }}" target="_self" rel="noopener noreferrer">{% endif %}

      {% unless section.settings.video_url_mobile == blank %}
        <div class="lg:hidden absolute inset-0">
          <site-video>
            <video {% unless section.settings.video_poster_mobile == blank %}poster="{{ section.settings.video_poster_mobile | image_url: width: 1000 }}"{% endunless %} class="w-full h-full object-cover" loop autoplay muted playsinline>
              <source src="{{ section.settings.video_url_mobile }}" type="video/mp4">
            </video>
          </site-video>
        </div>
      {% endunless %}

      {% unless section.settings.video_url_desktop == blank %}
        <div class="hidden lg:block absolute inset-0">
          <site-video>
            <video {% unless section.settings.video_poster == blank %}poster="{{ section.settings.video_poster | image_url: width: 1920 }}"{% endunless %} class="w-full h-full object-cover" loop autoplay muted playsinline>
              <source src="{{ section.settings.video_url_desktop }}" type="video/mp4">
            </video>
          </site-video>
        </div>
      {% endunless %}

      {% unless section.settings.image_mobile == blank %}
        <div class="lg:hidden absolute inset-0">
          {%- render 'image', image: section.settings.image_mobile, class: 'w-full h-full object-cover', loading: 'eager' -%}
        </div>
      {% endunless %}

      {% unless section.settings.image_desktop == blank %}
        <div class="hidden lg:block absolute inset-0">
          {%- render 'image', image: section.settings.image_desktop, class: 'w-full h-full object-cover', loading: 'eager' -%}
        </div>
      {% endunless %}

      {% if section.settings.banner_link != blank %}</a>{% endif %}
    </div>
    <!-- / MEDIA -->
  </div>
</div>

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "presets": [{ "name": "Hero" }],
  "settings": [
    { "type": "checkbox", "id": "fifty_fifty", "label": "Fifty Fifty" },
    { "type": "color",    "id": "bg_color",    "label": "Background Color" },
    { "type": "select",   "id": "button_color", "label": "Button Color", "options":[{"value":"black","label":"Black"},{"value":"cream","label":"Cream"}] },
    { "type": "select",   "id": "text_color",   "label": "Text Color",   "options":[{"value":"white","label":"White"},{"value":"black","label":"Black"}] },
    { "type": "text",     "id": "sub_heading",  "label": "Sub-Heading" },
    { "type": "richtext", "id": "title",        "label": "Title" },
    { "type": "text",     "id": "sup_word",     "label": "Floating word" },
    { "type": "text",     "id": "title_words",  "label": "Title Words" },
    { "type": "richtext", "id": "text",         "label": "Text" },
    { "type": "url",      "id": "cta_link",     "label": "CTA Link" },
    { "type": "text",     "id": "cta_text",     "label": "CTA Text" },
    { "type": "image_picker","id":"image_desktop","label":"Background Image Desktop" },
    { "type": "image_picker","id":"image_mobile","label":"Background Image Mobile" },
    { "type": "text",     "id": "video_url_desktop","label":"Video URL Desktop (Mp4)" },
    { "type": "text",     "id": "video_url_mobile", "label":"Video URL Mobile (Mp4)" },
    { "type": "image_picker","id":"video_poster_mobile","label":"Video Poster Mobile" },
    { "type": "image_picker","id":"video_poster",        "label":"Video Poster Desktop" },
    { "type": "checkbox", "id": "mobile_image_first","label":"Show image before content on mobile","default":false },
    { "type": "url",      "id": "banner_link",   "label": "Banner Link" }
  ]
}
{% endschema %}
